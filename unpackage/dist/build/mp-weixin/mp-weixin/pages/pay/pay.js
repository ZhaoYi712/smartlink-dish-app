(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/pay/pay"],{"0308":function(e,t,r){},6134:function(e,t,r){"use strict";r.r(t);var n=r("6b79"),o=r.n(n);for(var i in n)"default"!==i&&function(e){r.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a},"6b79":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("2f62");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){r.e("components/list-cell/list-cell").then(function(){return resolve(r("a486"))}.bind(null,r)).catch(r.oe)},u=function(){r.e("components/modal/modal").then(function(){return resolve(r("5987"))}.bind(null,r)).catch(r.oe)},c={components:{listCell:a,modal:u},data:function(){return{form:{remark:""},orderId:null,ensureAddressModalVisible:!1,paying:!1}},computed:i({},(0,n.mapState)(["appProperties","userInfo","takeType","cart"]),{totalPrice:function(){var e=0;return this.cart.forEach((function(t){e+=t.realPrice*t.number})),"外卖配送"==this.takeType&&(e+=this.appProperties.packingPrice+this.appProperties.sendingPrice),e}}),onLoad:function(t){t.remark&&(this.form.remark=t.remark),this.cart=e.getStorageSync("cart")},methods:{goToRemark:function(){e.navigateTo({url:"/pages/remark/remark?remark="+this.form.remark})},submit:function(){"外卖配送"==this.takeType?this.ensureAddressModalVisible=!0:this.createOrder()},createOrder:function(){this.ensureAddressModalVisible=!1;var t=this,r=this.userInfo.phone;if(this.userInfo.address&&""!=this.userInfo.address&&r&&""!=r)if(this.cart.length<=0)t.$msg("请选择商品");else{var n="",o=0;this.cart.forEach((function(e){null==e.propertyStr||""==e.propertyStr?n+=e.name+"*"+e.number+",":n+=e.name+"["+e.propertyStr+"]*"+e.number+",",o+=e.number})),n=n.substr(0,n.length-1);var i={wxOpenid:this.userInfo.wxOpenid,addressDetail:"外卖配送"==this.takeType?this.userInfo.address:"到店自取",totalPrice:this.totalPrice,verifyNum:r.substring(r.length-4,r.length),takeType:this.takeType,extraInfo:this.form.remark,userPhone:this.userInfo.phone,receiver:this.userInfo.name,goodsPreview:n,goodsTotalNum:o};console.log("创建订单参数,并跳转到支付小程序去支付",i),t.$request("/order","post",i).then((function(r){t.$store.commit("set_cart",[]),e.reLaunch({url:"/pages/take-foods/take-foods"})}))}else e.showModal({content:"请先去设置收货信息",confirmText:"去设置",success:function(t){t.confirm&&e.navigateTo({url:"/pages/mine/userinfo"})}})}}};t.default=c}).call(this,r("543d")["default"])},"7f4b":function(e,t,r){"use strict";var n=r("0308"),o=r.n(n);o.a},a3b0:function(e,t,r){"use strict";var n={listCell:function(){return r.e("components/list-cell/list-cell").then(r.bind(null,"a486"))},modal:function(){return r.e("components/modal/modal").then(r.bind(null,"5987"))}},o=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.ensureAddressModalVisible=!1})},i=[];r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return n}))},b105:function(e,t,r){"use strict";(function(e){r("10b9");n(r("66fd"));var t=n(r("d6f5"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("543d")["createPage"])},d6f5:function(e,t,r){"use strict";r.r(t);var n=r("a3b0"),o=r("6134");for(var i in o)"default"!==i&&function(e){r.d(t,e,(function(){return o[e]}))}(i);r("7f4b");var s,a=r("f0c5"),u=Object(a["a"])(o["default"],n["b"],n["c"],!1,null,"3a0f2d82",null,!1,n["a"],s);t["default"]=u.exports}},[["b105","common/runtime","common/vendor"]]]);